## 五个区
在c++内，内存分成5个区，分别堆、栈、自由存储区、全局/静态存储区和常量存储区。
+ 栈：**由编译器分配**，不需要时候会自动清除。里面的变量通常为局部变量、函数参数。
+ 堆：new分配的内存块，编译器不去管释放，由我们自己去控制(new对应delete)。若没有释放，程序结束会，操作系统会自动回收。
+ 自由存储区：由malloc来分配的内存块，与堆十分相似，不过用free来结束自己生命。
+ 全局/静态存储区：全局变量和静态变量被分配到同一块内存中(程序结束后系统释放)。
+ 常量存储区：存放的是常量，不允许修改。

```c++
#include <stdio.h>
using namespace std;
int main()
{
    int a = 0;                  //栈
    int c = 0;                  //栈
    char* b = new char[20];     //堆
    void* d = malloc(20);       //堆
    char* e = "Hello World!";	//常量存储区
    static int f = 4;           //全局/静态存储区

    printf("&a : %p\n", &a);
    printf("&c : %p\n", &c);
    printf("b  : %p, &b : %p\n", b, &b);
    printf("d  : %p, &d : %p\n", d, &d);
    printf("e  : %p, &e : %p\n", e, &e);
    printf("&f : %p\n", &f);

    return 0;
}

```
>**输出**:    
&a : 0x7ffeeb71f9c8  
&c : 0x7ffeeb71f9c4  
b  : 0x7f9fa7c02750, &b : 0x7ffeeb71f9b8  
d  : 0x7f9fa7c02770, &d : 0x7ffeeb71f9b0  
e  : 0x1044e0f58, &e : 0x7ffeeb71f9a8  
&f : 0x1044e1028  

## 区别
+ 管理方式不同：
>栈是由编译器自动管理，无需手动管理；堆是有程序员自己控制，容易产生内存泄漏  
+ 空间大小不同：
>一般在32位系统下，堆内存可以达到4G空间。**栈一般都是有一定的空间大小的**，如，在VC6下，默认的栈空间大小为1M(貌似)，当然是可以修改的。
+ 碎片问题：
>对于堆来说，频繁的new/delete势必会造成内存空间的不连续，**造成大量的碎片**，使程序效率降低。栈则不会出现这个问题，因为栈是先进后出的队列，一一对应，以至于**永远都不可能有一个内存块从栈中间弹出，在他弹出之前，在他上面的后进的栈内容已经被弹出**。
+ 生长方式：
>堆，生长方向向上，向着内存地址增加的方向；对于栈，它的生长方向向下，向着内存地址减小的方向增长。(可以看上方程序输出)
+ 分配效率：
>**栈**是机器系统提供的数据结构，计算机会在底层对栈提供支持：分配专门的寄存器存放栈的地址，压栈出栈都有专门的指令执行，这就决定了栈的效率比较高。**堆**则是c/c++函数库提供的，它的机制是很复杂的，为了分配一块内存，库函数会按照一定的算法在堆内搜索可用的足够大小的空间，如果没有足够大小的空间(可能由于内存碎片太多)，就有可能调用系统功能去增加程序数据段的内存空间，这样就有机会分到足够大小的内存，然后进行返回。显然其效率比栈低。  
堆和栈比，由于大量new/delete的使用，容易造成大量的内存碎片；由于没有专门的系统支持，效率很低；由于可能引发用户态和核心态的切换，内存的申请，代价变得更加昂贵。所以栈在程序中是最广泛的，就算是**函数的调用**也利用栈区完成，函数调用过程中的参数，返回地址，局部变量都采取栈的方式存放。推荐用栈而非堆。  
[参考资料](https://www.cnblogs.com/liuxiaoyang/p/8110069.html)

## 数据结构(未完)
堆  
栈